<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Taylor Series Calculator</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="/static/taylor_series.css">
    <link rel="stylesheet" href="taylor_series.css">

</head>
<body>
    <nav id="nav_bar">
        <img src="solvemate symbol.png" alt="sorry">

    </nav>

    <div id="outer">
        <div id="main_heading">
            <h1>Taylor Series Calculator</h1>
        </div>
        
        <div id="input_elements">
               <label>Function f(x) : </label>
               <input type="text" id="functionInput" placeholder="Enter the function"  >
               <label>Center point (a): </label>
               <input type="number" id="x0Input" value="0" >
               <label>Value to Approximate (x): </label>
               <input type="number" id="xInput" value="0.5">
               <label>Order: </label>
            <input type="number" id="orderInput" value="4">
        </div>
        
        
              
        <button onclick="calculateTaylor()">Calculate</button>
        
    </div>

        <div class="displayres">
            <div class="resultdis">
                    <p>Approximated Value:</p> 
                     <span id="result"></span>
            </div>

            <div class="seriesdis">
                    <p>Full Taylor Series:</p> 
                    <span id="series"></span>
            </div>

        </div>
    
   




    <script>
async function calculateTaylor() {
    const functionInput = document.getElementById('functionInput').value;
    const x0 = parseFloat(document.getElementById('x0Input').value);
    const x = parseFloat(document.getElementById('xInput').value);
    const order = parseInt(document.getElementById('orderInput').value);
    const resultDisplay = document.getElementById('result');
    const seriesDisplay = document.getElementById('series');

    const data = {
        function: functionInput,
        initial_guess: x0,
        value: x,
        order: order
    };

    try {
        const response = await fetch('http://127.0.0.1:8000/taylor', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });

        const result = await response.json();
        resultDisplay.innerText = ` ${result.taylor_approximation}`;

        // Render formula with MathJax
        seriesDisplay.innerHTML = `\\[ ${result.taylor_series} \\]`;
        MathJax.typeset();  // Ask MathJax to render the new formula

    } catch (error) {
        resultDisplay.innerText = 'Error fetching API';
        seriesDisplay.innerText = '';
    }
}

    </script>

</body>
</html>
